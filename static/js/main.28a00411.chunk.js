(this.webpackJsonpspreact=this.webpackJsonpspreact||[]).push([[0],{38:function(e,t,n){},64:function(e,t,n){"use strict";n.r(t);var a=n(1),s=n(29),i=n.n(s),c=n(13),l=n(9),o=n(10),r=n(12),d=n(11),h=n(2),u=(n(37),n(38),n(3)),b=n(30),j=n.n(b).a.create({baseURL:"https://sproner.herokuapp.com/api",headers:{"Content-type":"application/json"}}),p=new(function(){function e(){Object(l.a)(this,e)}return Object(o.a)(e,[{key:"getAll",value:function(){return j.get("/song")}},{key:"create",value:function(e){return j.post("/song",e)}},{key:"findByTitle",value:function(e){return j.get("/song?title=".concat(e))}},{key:"delete",value:function(e){return j.delete("/song/".concat(e))}},{key:"get",value:function(e){return j.get("/song/".concat(e))}},{key:"update",value:function(e,t){return j.put("/song/".concat(e),t)}}]),e}()),g=n(0),O=function(e){Object(r.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).onChangeTitle=a.onChangeTitle.bind(Object(u.a)(a)),a.onChangeDescription=a.onChangeDescription.bind(Object(u.a)(a)),a.onChangePublishedOn=a.onChangePublishedOn.bind(Object(u.a)(a)),a.onChangeDuration=a.onChangeDuration.bind(Object(u.a)(a)),a.anotherSong=a.anotherSong.bind(Object(u.a)(a)),a.saveSong=a.saveSong.bind(Object(u.a)(a)),a.state={id:null,title:"",description:"",publishedOn:"",duration:"",submitted:!1},a}return Object(o.a)(n,[{key:"onChangeTitle",value:function(e){this.setState({title:e.target.value})}},{key:"onChangeDescription",value:function(e){this.setState({description:e.target.value})}},{key:"onChangePublishedOn",value:function(e){this.setState({publishedOn:e.target.value})}},{key:"onChangeDuration",value:function(e){this.setState({duration:e.target.value})}},{key:"anotherSong",value:function(){this.setState({id:null,title:"",description:"",publishedOn:"",duration:"",submitted:!1})}},{key:"saveSong",value:function(){var e=this,t={title:this.state.title,description:this.state.description,publishedOn:this.state.publishedOn,duration:this.state.duration};p.create(t).then((function(t){e.setState({id:t.data.id,title:t.data.title,description:t.data.description,publishedOn:t.data.publishedOn,duration:t.data.duration,submitted:!0}),console.log(t.data)})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){return Object(g.jsx)("div",{className:"submit-form",children:this.state.submitted?Object(g.jsxs)("div",{children:[Object(g.jsx)("h4",{children:" You have submitted succesfully!"}),Object(g.jsx)("button",{className:"btn btn-success",onClick:this.anotherSong,children:"Add another"})]}):Object(g.jsxs)("div",{children:[Object(g.jsxs)("div",{className:"form-group",children:[Object(g.jsx)("label",{htmlFor:"title",children:"Title of the song:"}),Object(g.jsx)("input",{type:"text",className:"form-control",id:"title",required:!0,value:this.state.title,onChange:this.onChangeTitle,placeholder:"Write the song's title",name:"title"})]}),Object(g.jsxs)("div",{className:"form-group",children:[Object(g.jsx)("label",{htmlFor:"description",children:"Lyrics:"}),Object(g.jsx)("textarea",{className:"form-control",id:"descripcion",required:!0,value:this.state.description,onChange:this.onChangeDescription,name:"description",rows:"3",placeholder:"Write the song's lyrics"})]}),Object(g.jsxs)("div",{className:"form-group",children:[Object(g.jsx)("label",{htmlFor:"publishedOn",children:"Published on (yyyy-mm):"}),Object(g.jsx)("input",{className:"form-control",type:"month",id:"publishedOn",name:"publishedOn",pattern:"[0-9]{4}-[0-9]{2}",value:this.state.publishedOn,onChange:this.onChangePublishedOn,placeholder:"2012-10"})]}),Object(g.jsxs)("div",{className:"form-group",children:[Object(g.jsx)("label",{htmlFor:"duration",children:"Duration (hh:mm:ss):"}),Object(g.jsx)("input",{className:"form-control",type:"text",id:"duration",name:"duration",pattern:"([0-9]{2}:)?[0-9]{2}:[0-9]{2}",value:this.state.duration,onChange:this.onChangeDuration,placeholder:"00:03:30"})]}),Object(g.jsx)("button",{className:"btn btn-success",onClick:this.saveSong,children:"Submit"})]})})}}]),n}(a.Component),m=(n(58),function(e){Object(r.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).onChangeSearchTitle=a.onChangeSearchTitle.bind(Object(u.a)(a)),a.retrieveSongs=a.retrieveSongs.bind(Object(u.a)(a)),a.refreshList=a.refreshList.bind(Object(u.a)(a)),a.searchTitle=a.searchTitle.bind(Object(u.a)(a)),a.deleteSong=a.deleteSong.bind(Object(u.a)(a)),a.state={songs:[],searchTitle:""},a}return Object(o.a)(n,[{key:"componentDidMount",value:function(){this.retrieveSongs()}},{key:"deleteSong",value:function(e){var t=this;p.delete(e).then((function(e){console.log(e.data),t.refreshList()})).catch((function(e){console.log(e)}))}},{key:"retrieveSongs",value:function(){var e=this;p.getAll().then((function(t){console.log("Se invoco de nuevo el obtener los songs"),e.setState({songs:t.data}),console.log(t.data),console.log("Esos fueron los datos de los songs")})).catch((function(e){console.log(e)}))}},{key:"refreshList",value:function(){this.retrieveSongs()}},{key:"onChangeSearchTitle",value:function(e){var t=e.target.value;this.setState({searchTitle:t})}},{key:"searchTitle",value:function(){var e=this;p.findByTitle(this.state.searchTitle).then((function(t){e.setState({songs:t.data}),console.log(t.data)})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){var e=this,t=this.state,n=t.searchTitle,a=t.songs;return Object(g.jsxs)("div",{children:[Object(g.jsxs)("div",{className:"input-group mb-3",children:[Object(g.jsx)("input",{type:"text",className:"form-control",placeholder:"Search by title",value:n,onChange:this.onChangeSearchTitle}),Object(g.jsx)("div",{className:"input-group-append",children:Object(g.jsx)("button",{className:"btn btn-outline-secondary",type:"button",onClick:this.searchTitle,children:"Search"})})]}),Object(g.jsx)("h4",{children:"Songs List"}),this.state.songs?Object(g.jsx)("div",{className:"table-responsive",children:Object(g.jsxs)("table",{className:"table table-dark table-hover",style:{tableLayout:"fixed"},children:[Object(g.jsx)("thead",{children:Object(g.jsxs)("tr",{children:[Object(g.jsx)("th",{scope:"col",style:{width:"5%"},children:"#"}),Object(g.jsx)("th",{scope:"col",children:"Song"}),Object(g.jsx)("th",{scope:"col",style:{width:"35%"},children:"Lyrics"}),Object(g.jsx)("th",{scope:"col",children:"Published on"}),Object(g.jsx)("th",{scope:"col",children:"Duration"}),Object(g.jsx)("th",{scope:"col",children:"Actions"})]})}),Object(g.jsx)("tbody",{children:a&&a.map((function(t,n){return Object(g.jsxs)("tr",{children:[Object(g.jsxs)("th",{scope:"row",children:[" ",n+1," "]}),Object(g.jsx)("td",{children:t.title}),Object(g.jsx)("td",{className:"text-truncate",children:t.description}),Object(g.jsx)("td",{children:t.publishedOn}),Object(g.jsx)("td",{children:t.duration}),Object(g.jsxs)("td",{children:[Object(g.jsx)(c.b,{to:"/songs/"+t.id,children:Object(g.jsx)("i",{className:"fas fa-eye fa-2x",style:{color:"white"}})}),Object(g.jsx)("button",{className:"btn",onClick:function(){return e.deleteSong(t.id)},children:Object(g.jsx)("i",{className:"fa fa-trash fa-2x",style:{color:"white"}})})]})]},n)}))})]})}):Object(g.jsxs)("div",{children:[Object(g.jsx)("h5",{children:"Content not found :( "}),Object(g.jsx)("p",{children:"You can add more content using add+"})]})]})}}]),n}(a.Component)),x=n(32),v=function(e){var t=e.edit,n=e.song,a=e.editFunction,s=e.updateSong,i=e.handleInputChange;return t?Object(g.jsxs)("form",{className:"card text-center",children:[Object(g.jsxs)("div",{className:"card-header bg-dark",children:[Object(g.jsx)("label",{htmlFor:"songTitle",className:"text-center text-white lead",children:"Title"}),Object(g.jsx)("input",{className:"form-control w-75",placeholder:"Introduce the new song's title",value:n.title,style:{margin:"0 auto"},onChange:i,id:"songTitle",name:"title"})]}),Object(g.jsxs)("div",{className:"card-body",children:[Object(g.jsxs)("div",{className:"form-group",children:[Object(g.jsx)("label",{htmlFor:"songLyrics",className:"card-title",children:"New lyrics:"}),Object(g.jsx)("textarea",{className:"form-control card-text w-75",value:n.description,style:{margin:"0 auto"},rows:"3",placeholder:"Add new lyrics or modify the existent!",onChange:i,id:"songLyrics",name:"description"})]}),Object(g.jsxs)("div",{className:"input-group w-75",style:{margin:"0 auto"},children:[Object(g.jsx)("label",{htmlFor:"publisheOn",className:"input-group-text bg-dark text-white",id:"label-published",children:"Published on (yyyy-mm)"}),Object(g.jsx)("input",{type:"month",className:"form-control",placeholder:"Update the song release","aria-describedby":"label-published",id:"publishedOn",name:"publishedOn",pattern:"[0-9]{4}-[0-9]{2}",onChange:i,value:n.publishedOn})]}),Object(g.jsxs)("div",{className:"input-group w-75",style:{margin:"0 auto"},children:[Object(g.jsx)("label",{htmlFor:"duration",className:"input-group-text bg-dark text-white",id:"label-duration",children:"Duration (hh:mm:ss)"}),Object(g.jsx)("input",{type:"text",className:"form-control",placeholder:"Update the song duration","aria-describedby":"label-duration",id:"duration",name:"duration",pattern:"([0-9]{2}:)?[0-9]{2}:[0-9]{2}",onChange:i,value:n.duration})]})]}),Object(g.jsx)("div",{className:"card-footer border-secondary",children:Object(g.jsxs)("div",{className:"btn-group",role:"group","aria-label":"Song control",children:[Object(g.jsxs)("button",{type:"button",onClick:a,className:"btn btn-outline-danger text-center d-flex fa-1x align-self-center",children:[Object(g.jsx)("i",{className:"fas fa-undo d-flex align-self-center p-1"}),"Cancel"]}),Object(g.jsxs)("button",{type:"button",onClick:s,className:"btn btn-outline-primary text-center d-flex fa-1x align-self-center",children:[Object(g.jsx)("i",{className:"fas fa-upload d-flex align-self-center p-1"}),"Update"]})]})})]}):Object(g.jsxs)("div",{className:"card text-center",children:[Object(g.jsx)("h3",{className:"card-header lead text-white bg-dark",children:n.title}),Object(g.jsxs)("div",{className:"card-body",children:[Object(g.jsx)("h5",{className:"card-title",children:"Lyrics:"}),Object(g.jsx)("p",{className:"card-text",children:Object(g.jsx)("em",{style:{whiteSpace:"pre-wrap"},children:n.description})}),Object(g.jsxs)("p",{className:"card-text",children:[Object(g.jsx)("strong",{children:"Published on:"})," ",n.publishedOn]}),Object(g.jsxs)("p",{className:"card-text",children:[Object(g.jsx)("strong",{children:"Duration:"})," ",n.duration]})]}),Object(g.jsx)("div",{className:"card-footer border-secondary",children:Object(g.jsxs)("div",{className:"btn-group",role:"group","aria-label":"Song control",children:[Object(g.jsx)("button",{type:"button",className:"btn btn-outline-danger",children:Object(g.jsx)("i",{className:"fas fa-trash fa-2x"})}),Object(g.jsx)("button",{onClick:a,type:"button",className:"btn btn-outline-success",children:Object(g.jsx)("i",{className:"fas fa-edit fa-2x"})})]})})]})},f=function(e){Object(r.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).retrieveSong=a.retrieveSong.bind(Object(u.a)(a)),a.updateSong=a.updateSong.bind(Object(u.a)(a)),a.editSong=a.editSong.bind(Object(u.a)(a)),a.handleInputChange=a.handleInputChange.bind(Object(u.a)(a)),a.state={id:e.match.params.id,title:null,description:null,publishedOn:null,duration:null,edit:!1},a}return Object(o.a)(n,[{key:"componentDidMount",value:function(){this.retrieveSong(this.state.id)}},{key:"updateSong",value:function(){var e=this,t={id:this.state.id,title:this.state.title,description:this.state.description,publishedOn:this.state.publishedOn,duration:this.state.duration};p.update(this.state.id,t).then((function(e){console.log("La respuesta de la api:"),console.log(e.data)})).catch((function(e){console.log("Valio, no se pudo actualizar"),console.log(e)})).finally((function(){e.retrieveSong(t.id),e.setState({edit:!1})}))}},{key:"handleInputChange",value:function(e){var t=e.target,n=t.value,a=t.name;this.setState(Object(x.a)({},a,n))}},{key:"editSong",value:function(){this.state.edit?this.setState({edit:!1}):this.setState({edit:!0})}},{key:"retrieveSong",value:function(e){var t=this;p.get(e).then((function(e){t.setState({id:e.data.id,title:e.data.title,description:e.data.description,publishedOn:e.data.publishedOn,duration:e.data.duration})})).catch((function(e){console.log(e),console.log("No se encontro xd, poner a null lo demas"),t.setState({id:t.props.match.params.id,title:null,description:null,publishedOn:null,duration:null,edit:!1})}))}},{key:"render",value:function(){var e=this.state;return Object(g.jsx)("div",{children:null!==e.title?Object(g.jsx)(v,{edit:e.edit,song:e,handleInputChange:this.handleInputChange,updateSong:this.updateSong,editFunction:this.editSong}):Object(g.jsx)("h2",{children:"The song you request doesn't exist!"})})}}]),n}(a.Component),y=function(e){Object(r.a)(n,e);var t=Object(d.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return Object(g.jsxs)("div",{children:[Object(g.jsxs)("nav",{className:"navbar navbar-expand navbar-dark bg-dark",children:[Object(g.jsx)(c.b,{to:"/",className:"navbar-brand",children:"Music!"}),Object(g.jsxs)("div",{className:"navbar-nav mr-auto",children:[Object(g.jsx)("li",{className:"nav-item",children:Object(g.jsx)(c.b,{to:"/songs",className:"nav-link",children:"Songs"})}),Object(g.jsx)("li",{className:"nav-item",children:Object(g.jsx)(c.b,{to:"/add",className:"nav-link",children:"Add+"})})]})]}),Object(g.jsx)("div",{className:"container mt-3",children:Object(g.jsxs)(h.c,{children:[Object(g.jsx)(h.a,{exact:!0,path:["/","/songs"],component:m}),Object(g.jsx)(h.a,{exact:!0,path:"/add",component:O}),Object(g.jsx)(h.a,{path:"/songs/:id",component:f})]})})]})}}]),n}(a.Component);i.a.render(Object(g.jsx)(c.a,{children:Object(g.jsx)(y,{})}),document.getElementById("root"))}},[[64,1,2]]]);
//# sourceMappingURL=main.28a00411.chunk.js.map